@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - NRLObstacleReporting</title>
    
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/NRLObstacleReporting.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/lib/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <!-- Tailwind SKAL ligge helt til slutt -->
    <link rel="stylesheet" href="~/css/output.css" asp-append-version="true" />

    <!-- Leaflet -->
    <script src="~/lib/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>


    <style>
        html, body {
            min-height: 100%;
            background: transparent !important;
        }
    </style>
</head>

<body class="relative min-h-screen overflow-x-hidden font-[Inter] text-gray-900">

    <!-- Gradient som dekker hele bakgrunnen -->
    <div class="fixed inset-0 bg-gradient-to-b from-blue-100 via-blue-50 to-white -z-10"></div>

    <!-- NAVBAR -->
    <nav class="relative flex items-center justify-between w-full px-6 bg-gradient-to-b from-blue-200 to-blue-400 border-b border-blue-500/70 shadow-sm h-[92px]">

        <!-- Venstre (Home) -->
        <a asp-controller="Home" asp-action="Index"
           class="flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100 hover:bg-blue-50 text-blue-700 hover:text-blue-800 font-semibold shadow-sm border border-blue-200 transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 4l9 5.75M4.5 10.5V19a1.5 1.5 0 001.5 1.5h3.75v-4.5h4.5V20.5H18a1.5 1.5 0 001.5-1.5v-8.5"/>
            </svg>
            <span>Home</span>
        </a>

        <!-- Midten (logo med glass-effekt) -->
        <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
            h-[92px] w-[360px] md:h-[92px] md:w-[400px]
            bg-white/30 backdrop-blur-md rounded-lg shadow-md
            flex items-center justify-center pointer-events-none z-10">
            <img src="~/lib/logo/aerobarrier-logo.svg"
                 alt="AeroBarrier logo"
                 class="object-contain scale-[5] h-[80px] md:h-[84px] w-auto drop-shadow-md select-none" />
        </div>
        
        <!-- Høyre (Log in / Log out) -->
        <div class="flex items-center gap-4">
            @if (SignInManager.IsSignedIn(User))
            {
                <form asp-controller="Account" asp-action="LogOff" method="post" class="inline">
                    @Html.AntiForgeryToken()
                    <button type="submit"
                            class="flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100 hover:bg-blue-50 text-blue-700 hover:text-blue-800 font-semibold shadow-sm border border-blue-200 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3H6A2.25 2.25 0 003.75 5.25v13.5A2.25 2.25 0 006 21h7.5a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"/>
                        </svg>
                        Log out
                    </button>
                </form>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login"
                   class="flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100 hover:bg-blue-50 text-blue-700 hover:text-blue-800 font-semibold shadow-sm border border-blue-200 transition-all duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3H6A2.25 2.25 0 003.75 5.25v13.5A2.25 2.25 0 006 21h7.5a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"/>
                    </svg>
                    Log in
                </a>
            }
        </div>
    </nav>


    <!-- HOVEDINNHOLD -->
    <main class="container mx-auto mt-6">
        @RenderBody()
    </main>

    <!-- SCRIPTS -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/AssignValueByID.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
